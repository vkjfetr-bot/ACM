# Prometheus Configuration for ACM
# =================================
# Minimal config - receives remote writes from Alloy
# Also scrapes Alloy's own metrics

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: acm-local
    env: development

# Remote write receiver enabled via --web.enable-remote-write-receiver flag

# Scrape Alloy's internal metrics (if accessible from Docker)
scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Scrape Alloy metrics (host machine)
  # Note: host.docker.internal works on Docker Desktop
  - job_name: 'alloy'
    static_configs:
      - targets: ['host.docker.internal:12345']
    metrics_path: /metrics

  # Scrape ACM Python app metrics (if exposed)
  # Uncomment if you add a metrics endpoint to ACM
  # - job_name: 'acm'
  #   static_configs:
  #     - targets: ['host.docker.internal:8080']
  #   metrics_path: /metrics
